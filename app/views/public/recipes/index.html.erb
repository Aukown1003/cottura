<div class="container-fluid p-0">
  <div class="row">
    <div class="col-12 search-form">
      <%= form_with url: recipes_path, method: :get, class:"w-50 mx-auto my-2" do |f| %>
      <div class="text-center d-flex">
        <%= f.search_field :search, class: 'form-control rounded-0', placeholder: '検索したい言葉を入力、複数ある場合は半角スペースを挿入', value: params[:search] %>
        <%= f.button type: "submit", class: "btn btn-secondary rounded-0" do %>
          <i class="fas fa-search"></i>
        <% end %>
      </div>
      <% end %>
    </div>

    <% if session[:category_id].present? %>
      <div class="col-12 search-category pb-2">
        <% @categories.each do |category| %>
          <label class="tag_labels rounded-2 ms-1">
            <%= link_to category_id_delete_recipe_path(destroy_category_id: category.id), method: :delete, class:"btn btn-dark px-2" do %>
              <%= category.name %><span class="ms-1"><i class="fas fa-times"></i></span>
            <% end %>
          </label>
        <% end %>
        <%= link_to "全てのカテゴリーを削除", category_id_all_delete_recipe_path, method: :delete, class:"ms-1 tag_labels btn btn-danger rounded-1" %>

        <!--<%#= form_with url: category_id_delete_recipe_path, method: :delete do |f| %>-->
        <!--  <%#= f.collection_check_boxes(:destroy_category_id, @categories, :id, :name) do |b| %>-->
        <!--    <%#= b.label { b.check_box + b.text } %>-->
        <!--  <%# end %>-->
        <!--  <%#= link_to "全てのカテゴリーを削除", category_id_all_delete_recipe_path, method: :delete, class:"btn btn-danger" %>-->
        <!--  <div class="mt-3"><%#= f.submit "削除" %></div>-->
        <!--<%# end %>-->
      </div>
    <% end %>

    <%= form_with url: search_recipe_path, method: :get do |f| %>
      <div class="d-flex justify-content-around">
        <% @genres.each do |genre| %>
          <div class="col gnavi__list py-2 my-auto bg-secondary text-white border border-white">
            <h5 class="text-center m-0"><%= genre.name %><span class="ps-2"><i class="fas fa-caret-square-down"></i></span></h5>
            <ul class="dropdown__lists">
              <% genre.categories.each do |category| %>
              <li class="dropdown__list border-bottom border-dark">
                <%= link_to category.name, search_recipe_path(category_id: category.id), class:"btn btn btn-light rounded-0" %>
              </li>
              <% end %>
              <!--<%#= f.collection_check_boxes(:category_id, genre.categories, :id, :name) do |b| %>-->
              <!--  <li class="dropdown__list bg-secondary">-->
              <!--    <label>-->
              <!--      <span class="ps-2"><#%= b.check_box %></span>-->
              <!--      <span class="ps-2"><#%= b.text %></span>-->
              <!--    </label>-->
              <!--  </li>-->
              <!--<%# end %>-->
            </ul>
          </div>
        <% end %>
      </div>
      <%#= f.submit "絞り込み表示", class:"btn btn-primary w-100" %>
    <% end %>

  </div>
</div>

</div>

<div class="container my-5">
  <div class="row">
    <% @recipes.each do |recipe| %>
      <%= render "/public/recipes/recipe_lists", recipe: recipe %>
    <% end %>
  </div>
</div>
